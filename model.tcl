
#3D Steel Deck Model
#Written by ali yaseripour 
#Unit N,m

wipe
model BasicBuilder -ndm 3 -ndf 6

source node.tcl



model BasicBuilder -ndm 3 -ndf 3

node 	65	0	0	0.049
node 	66	0.143	0	0.049
node 	67	0.4287	0	0.049
node 	68	0.7144	0	0.049
node 	69	1.0001	0	0.049
node 	70	1.2858	0	0.049
node 	71	1.5715	0	0.049
node 	72	1.8572	0	0.049
node 	73	2.1429	0	0.049
node 	74	2.4286	0	0.049
node 	75	2.7143	0	0.049
node 	76	3	0	0.049
node 	77	3.2857	0	0.049
node 	78	3.5714	0	0.049
node 	79	3.8571	0	0.049
node 	80	4.0001	0	0.049


node 	81	0	0.1415	0.049
node 	82	0.143	0.1415	0.049
node 	83	0.4287	0.1415	0.049
node 	84	0.7144	0.1415	0.049
node 	85	1.0001	0.1415	0.049
node 	86	1.2858	0.1415	0.049
node 	87	1.5715	0.1415	0.049
node 	88	1.8572	0.1415	0.049
node 	89	2.1429	0.1415	0.049
node 	90	2.4286	0.1415	0.049
node 	91	2.7143	0.1415	0.049
node 	92	3	0.1415	0.049
node 	93	3.2857	0.1415	0.049
node 	94	3.5714	0.1415	0.049
node 	95	3.8571	0.1415	0.049
node 	96	4.0001	0.1415	0.049

node 	97	0	-0.1415	0.049
node 	98	0.143	-0.1415	0.049
node 	99	0.4287	-0.1415	0.049
node 	100	0.7144	-0.1415	0.049
node 	101	1.0001	-0.1415	0.049
node 	102	1.2858	-0.1415	0.049
node 	103	1.5715	-0.1415	0.049
node 	104	1.8572	-0.1415	0.049
node 	105	2.1429	-0.1415	0.049
node 	106	2.4286	-0.1415	0.049
node 	107	2.7143	-0.1415	0.049
node 	108	3	-0.1415	0.049
node 	109	3.2857	-0.1415	0.049
node 	110	3.5714	-0.1415	0.049
node 	111	3.8571	-0.1415	0.049
node 	112	4.0001	-0.1415	0.049

node 	113	0	0	0.05
node 	114	0.143	0	0.05
node 	115	0.4287	0	0.05
node 	116	0.7144	0	0.05
node 	117	1.0001	0	0.05
node 	118	1.2858	0	0.05
node 	119	1.5715	0	0.05
node 	120	1.8572	0	0.05
node 	121	2.1429	0	0.05
node 	122	2.4286	0	0.05
node 	123	2.7143	0	0.05
node 	124	3	0	0.05
node 	125	3.2857	0	0.05
node 	126	3.5714	0	0.05
node 	127	3.8571	0	0.05
node 	128	4.0001	0	0.05

node 	129	0	0.3325	0.05
node 	130	0.143	0.3325	0.05
node 	131	0.4287	0.3325	0.05
node 	132	0.7144	0.3325	0.05
node 	133	1.0001	0.3325	0.05
node 	134	1.2858	0.3325	0.05
node 	135	1.5715	0.3325	0.05
node 	136	1.8572	0.3325	0.05
node 	137	2.1429	0.3325	0.05
node 	138	2.4286	0.3325	0.05
node 	139	2.7143	0.3325	0.05
node 	140	3	0.3325	0.05
node 	141	3.2857	0.3325	0.05
node 	142	3.5714	0.3325	0.05
node 	143	3.8571	0.3325	0.05
node 	144	4.0001	0.3325	0.05

node 	145	0	-0.3325	0.05
node 	146	0.143	-0.3325	0.05
node 	147	0.4287	-0.3325	0.05
node 	148	0.7144	-0.3325	0.05
node 	149	1.0001	-0.3325	0.05
node 	150	1.2858	-0.3325	0.05
node 	151	1.5715	-0.3325	0.05
node 	152	1.8572	-0.3325	0.05
node 	153	2.1429	-0.3325	0.05
node 	154	2.4286	-0.3325	0.05
node 	155	2.7143	-0.3325	0.05
node 	156	3	-0.3325	0.05
node 	157	3.2857	-0.3325	0.05
node 	158	3.5714	-0.3325	0.05
node 	159	3.8571	-0.3325	0.05
node 	160	4.0001	-0.3325	0.05


model BasicBuilder -ndm 3 -ndf 6
equalDOF 	1	65	1	2	3
equalDOF 	2	66	1	2	3
equalDOF 	3	67	1	2	3
equalDOF 	4	68	1	2	3
equalDOF 	5	69	1	2	3
equalDOF 	6	70	1	2	3
equalDOF 	7	71	1	2	3
equalDOF 	8	72	1	2	3
equalDOF 	9	73	1	2	3
equalDOF 	10	74	1	2	3
equalDOF 	11	75	1	2	3
equalDOF 	12	76	1	2	3
equalDOF 	13	77	1	2	3
equalDOF 	14	78	1	2	3
equalDOF 	15	79	1	2	3
equalDOF 	16	80	1	2	3

equalDOF 	1	81	1	2	3
equalDOF 	2	82	1	2	3
equalDOF 	3	83	1	2	3
equalDOF 	4	84	1	2	3
equalDOF 	5	85	1	2	3
equalDOF 	6	86	1	2	3
equalDOF 	7	87	1	2	3
equalDOF 	8	88	1	2	3
equalDOF 	9	89	1	2	3
equalDOF 	10	90	1	2	3
equalDOF 	11	91	1	2	3
equalDOF 	12	92	1	2	3
equalDOF 	13	93	1	2	3
equalDOF 	14	94	1	2	3
equalDOF 	15	95	1	2	3
equalDOF 	16	96	1	2	3

equalDOF 	1	97	1	2	3
equalDOF 	2	98	1	2	3
equalDOF 	3	99	1	2	3
equalDOF 	4	100	1	2	3
equalDOF 	5	101	1	2	3
equalDOF 	6	102	1	2	3
equalDOF 	7	103	1	2	3
equalDOF 	8	104	1	2	3
equalDOF 	9	105	1	2	3
equalDOF 	10	106	1	2	3
equalDOF 	11	107	1	2	3
equalDOF 	12	108	1	2	3
equalDOF 	13	109	1	2	3
equalDOF 	14	110	1	2	3
equalDOF 	15	111	1	2	3
equalDOF 	16	112	1	2	3

equalDOF 	17	113	1	2	3
equalDOF 	18	114	1	2	3
equalDOF 	19	115	1	2	3
equalDOF 	20	116	1	2	3
equalDOF 	21	117	1	2	3
equalDOF 	22	118	1	2	3
equalDOF 	23	119	1	2	3
equalDOF 	24	120	1	2	3
equalDOF 	25	121	1	2	3
equalDOF 	26	122	1	2	3
equalDOF 	27	123	1	2	3
equalDOF 	28	124	1	2	3
equalDOF 	29	125	1	2	3
equalDOF 	30	126	1	2	3
equalDOF 	31	127	1	2	3
equalDOF 	32	128	1	2	3

equalDOF 	33	129	1	2	3
equalDOF 	34	130	1	2	3
equalDOF 	35	131	1	2	3
equalDOF 	36	132	1	2	3
equalDOF 	37	133	1	2	3
equalDOF 	38	134	1	2	3
equalDOF 	39	135	1	2	3
equalDOF 	40	136	1	2	3
equalDOF 	41	137	1	2	3
equalDOF 	42	138	1	2	3
equalDOF 	43	139	1	2	3
equalDOF 	44	140	1	2	3
equalDOF 	45	141	1	2	3
equalDOF 	46	142	1	2	3
equalDOF 	47	143	1	2	3
equalDOF 	48	144	1	2	3

equalDOF 	49	145	1	2	3
equalDOF 	50	146	1	2	3
equalDOF 	51	147	1	2	3
equalDOF 	52	148	1	2	3
equalDOF 	53	149	1	2	3
equalDOF 	54	150	1	2	3
equalDOF 	55	151	1	2	3
equalDOF 	56	152	1	2	3
equalDOF 	57	153	1	2	3
equalDOF 	58	154	1	2	3
equalDOF 	59	155	1	2	3
equalDOF 	60	156	1	2	3
equalDOF 	61	157	1	2	3
equalDOF 	62	158	1	2	3
equalDOF 	63	159	1	2	3
equalDOF 	64	160	1	2	3


rigidLink 	beam		1	17
rigidLink 	beam		2	18
rigidLink 	beam		3	19
rigidLink 	beam		4	20
rigidLink 	beam		5	21
rigidLink 	beam		6	22
rigidLink 	beam		7	23
rigidLink 	beam		8	24
rigidLink 	beam		9	25
rigidLink 	beam		10	26
rigidLink 	beam		11	27
rigidLink 	beam		12	28
rigidLink 	beam		13	29
rigidLink 	beam		14	30
rigidLink 	beam		15	31
rigidLink 	beam		16	32


#

#Define Constrain	
#     ndTag ux    uy    uz    rx    ry    rz  1 fix 0free;															
fix 	1	1	1	1	1	1	1 ;
fix 	16	1	1	1	1	1	0 ; 

uniaxialMaterial   Steel02        1 300e6   202.7e9  0.000001 18.5 0.925 0.15
uniaxialMaterial   Steel02        2 415e6   202.7e9  0.000001 18.5 0.925 0.15
uniaxialMaterial Elastic 50 201e9



#frictionModel Coulomb $frnTag $mu

frictionModel Coulomb 1 0.4

#nDmaterial PlaneStressUserMaterial $matTag 40 7 $fc $ft $fcu $epsc0 $epscu $epstu $stc
#                                                               fc         ft    fcu     epsc0     epscu  epstu  stc
nDMaterial PlaneStressUserMaterial    3       40         7    41.0e6     2.08e6 -6.16e6  -0.002    -0.005 0.001 0.05
 
#nDmaterial PlateFromPlaneStress $newmatTag $matTag $OutofPlaneModulus
# nDMaterial PlateFromPlaneStress $matTag $PlaneStressMatTag $OutOfPlaneShearModulus #?????
nDMaterial   PlateFromPlaneStress    4        3   1.283e10

#nDmaterial PlateRebar $newmatTag $matTag $sita

nDMaterial PlateRebar 5 2 90
nDMaterial PlateRebar 6 2 0


#section PlateFiber 1 3 0.156
#long 0.00238
#tra 0.000267
#section LayeredShell $sectionTag $nLayers $matTag1 $thickness1...$matTagn $thicknessn
section LayeredShell 1 3 4 0.156 5 0.00238 6 0.000267;


set E 2.001E11;
set G [expr $E/(2.0*(1.0+0.3))];

section Fiber 360 -GJ [expr $G*6.21E-05] { ;
patch	quad	1	10	3	-0.08285	0.1415	0.08285	0.1415	0.08285	0.1533	-0.08285	0.1533
patch	quad	1	3	10	-0.00335	-0.1415	0.00335	-0.1415	0.00335	0.1415	-0.00335	0.1415
patch	quad	1	10	3	-0.08285	-0.1533	0.08285	-0.1533	0.08285	-0.1415	-0.08285	-0.1415

} ;

geomTransf PDelta 1 0 1 0;
#geomTransf Linear 2 0 0 -1;

source element.tcl


#element 	beam	eleTag	I 	j	A	E	G	J	Iz	Iy	transtag	mass
element 	elasticBeamColumn	46	1	17	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	47	2	18	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	48	3	19	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	49	4	20	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	50	5	21	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	51	6	22	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	52	7	23	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	53	8	24	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	54	9	25	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	55	10	26	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	56	11	27	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	57	12	28	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	58	13	29	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	59	14	30	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	60	15	31	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850
element 	elasticBeamColumn	61	16	32	0.000314159	2.10E+11	80769230769	1.5708E-08	7.85398E-09	7.85398E-09	1	7850



# element zeroLengthImpact3D $tag $slaveNode $masterNode $direction $initGap $frictionRatio $Kt $Kn $Kn2 $Delta_y $cohesion
element 	zeroLengthImpact3D	62	65	113	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	63	66	114	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	64	67	115	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	65	68	116	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	66	69	117	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	67	70	118	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	68	71	119	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	69	72	120	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	70	73	121	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	71	74	122	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	72	75	123	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	73	76	124	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	74	77	125	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	75	78	126	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	76	79	127	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	77	80	128	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00

element 	zeroLengthImpact3D	78	81	129	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	79	82	130	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	80	83	131	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	81	84	132	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	82	85	133	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	83	86	134	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	84	87	135	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	85	88	136	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	86	89	137	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	87	90	138	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	88	91	139	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	89	92	140	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	90	93	141	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	91	94	142	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	92	95	143	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	93	96	144	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00

element 	zeroLengthImpact3D	94	97	145	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	95	98	146	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	96	99	147	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	97	100	148	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	98	101	149	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	99	102	150	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	100	103	151	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	101	104	152	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	102	105	153	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	103	106	154	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	104	107	155	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	105	108	156	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	106	109	157	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	107	110	158	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	108	111	159	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00
element 	zeroLengthImpact3D	109	112	160	3	0	0.4	1.00E+10	1.00E+10	1.00E+05	0.00E+00	0.00E+00

recorder Node -file AA1newD.out -time -node  7 -dof 3 disp
recorder Node -file AA1newR1.out -time -node  1 -dof 3 reaction
recorder Node -file AA1newR21.out -time -node  16 -dof 3 reaction

#load
pattern Plain 1 Linear { ;
#eleLoad -ele $eleTag1 <$eleTag2 ....> -type -beamUniform $Wy <$Wx>
load 7 0.0 0.0 10.0 0.0 0.0 0.0  
#load 33 0.0 0.0 10.0 0.0 0.0 0.0 
};


#constraints Transformation
#numberer RCM
#system UmfPack 
#test EnergyIncr 1.0e-5 25 0
#algorithm ModifiedNewton

constraints Transformation;
numberer RCM;
##system BandGeneral;
system UmfPack 
##test NormDispIncr 1.0e-3 200 ;
test EnergyIncr 1.0e-5 200 0;
##algorithm BFGS -count 200
##algorithm NewtonLineSearch
algorithm KrylovNewton;
##algorithm ModifiedNewton
##
integrator DisplacementControl 7 3 -0.0001
##integrator LoadControl 50;	
analysis Static;

#
#source Solver.tcl
#integrator DisplacementControl 10 3 0.001;
analyze 10000;
loadConst -time 0.0;
puts "    pushover is built!"
exit;
